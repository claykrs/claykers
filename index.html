<!DOCTYPE html>

<html>
    <body>
        <div style="display: flex; flex-direction: column;">
            <h1 id="yuan">0 ¥</h1>
            <h3 id="_idle_output">+1 ¥/s</h3>
        </div>
    </body>

    <style>
        #yuan {
            margin-top: 0;
            margin-bottom: 4px;
        }

        #_idle_output {
            margin-top: 0;
            color: #111111;
            font-style: italic;
            font-weight: normal;
        }
    </style>

    <script>      
        let active_state
        let idleT = 0
        
        let data = {
            "yuan": 0,
            
            "_idle_output": 1,
            "_idle_rate": 1000,

            "upgrades": [
                {"price": 100, "owned": [0, 100], "value": [1, "_idle_output"]}
            ]
        }

        function name(k) {
            return (k == "_idle_output"
                    && "¥/step" || "")
        }

        data.upgrades.forEach((upg, i) => {
            let button = document.createElement("button")
            button.innerHTML = `upgrade ${i} (${upg.owned[0]})`
                + `<br>+${upg.value[0]} ${name(upg.value[1])}`
                  +`<br>-${upg.price} ¥`
            document.body.appendChild(button)
        })
        
        setInterval(function() { idleT += 10
            document.getElementById("yuan").textContent = `${data.yuan} ¥`
            document.getElementById("_idle_output").textContent = 
                `+${data._idle_output} ¥/${data._idle_rate >= 1E3 
                    && `${data._idle_rate / 1E3}s` || data._idle_rate + "ms"}`

            if (idleT >= data._idle_rate) { idleT = 0
                data.yuan += data._idle_output
            }
        }, 10)
    </script>
</html>

